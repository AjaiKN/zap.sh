* zap.sh: a bash CLI for putting files in the trash (WIP)
** Installation
*** With homebrew
#+begin_src sh
brew install ajaikn/tap/zap.sh
#+end_src
*** Manual
- Copy =bin/zap= into your PATH
- Copy =completions/zsh/_zap= into your zsh completions directory, or source =zap.plugin.zsh=
** Usage
#+begin_src
Usage: zap [OPTION]... [--] FILE...
Put each FILE in the trash. Currently supports macOS and Linux.

  -h, --help               Show this usage message.
  -f, --force              Override non-writable files, and ignore nonexistent or otherwise untrashable files.
                           If any of the files are owned by the current user but don't have write permissions,
                           delete them anyway. If any of the files are nonexistent, or if we can't trash them
                           (because their directories aren't writable and executable), ignore them and still
                           trash everything else. (Otherwise, this command will refuse to do anything if any
                           of the arguments are untrashable.)
  -n, --dry-run            Don't actually trash anything; just print what this command *would* do.
                           This option implies --verbose.
  -v, --verbose            Be more verbose.
  -s, --strategy=STRATEGY  Specify which trashing strategy to use.
                           Can also be specified with the ZAP_STRATEGY environment variable, which this
                           option supersedes.
  -d, --dir                Does nothing. For compatibility with rm.
  -r, -R, --recursive      Does nothing. For compatibility with rm.

*Available strategies*
  freedesktop              (default on Linux) Use the freedesktop.org Trash Specification:
                           https://specifications.freedesktop.org/trash-spec/1.0/
  macos_trash_command      (default on macOS >=14.0) Use the built-in macOS /usr/bin/trash command
  macos_applescript        (default on macOS <14.0) Use AppleScript
  macos_mv                 Use mv to move to ~/.Trash/
  gio                      Use the 'gio trash' command
  kioclient                Use the 'kioclient move FILE... trash:/' command
  trash_cli                Use trash-put from trash-cli: https://github.com/andreafrancia/trash-cli
  dangerous_rm             Use rm
  dangerous_shred          Use GNU shred
#+end_src
** Comparison table
Based on [[https://github.com/umlx5h/gtrash/blob/main/doc/alternatives.md?plain=1][gtrash's comparison table]].

|                                                            | AjaiKN/zap.sh | [[https://github.com/umlx5h/gtrash][gtrash]]                            | [[https://github.com/andreafrancia/trash-cli][trash-cli]]        | [[https://github.com/oberblastmeister/trashy][trashy]]                            | [[https://github.com/rushsteve1/trash-d][trash-d]]                     | [[https://github.com/sindresorhus/trash-cli][sindresorhus/trash-cli]]                   | [[https://github.com/ali-rantakari/trash][ali-rantakari/trash]]                    | [[https://github.com/nateshmbhat/rm-trash][nateshmbhat/rm-trash]]                         | [[https://github.com/robrwo/bashtrash][bashtrash]]     | [[https://github.com/babarot/gomi][gomi]]                        |
| Supports Linux?                                            | ✅           | ✅                               | ✅              | ✅                               | ✅                         | ✅ ([[https://github.com/sindresorhus/trash]["not very good and not maintained"]]) | ❌                                    | ✅ (but doesn't use ~$XDG_DATA_HOME~ env var) | ✅           | ✅                         |
| Supports macOS system trash can?                           | ✅           | ❌                               | ❌              | ❌                               | ❌                         | ✅                                      | ✅                                    | ❌                                          | ❌           | ❌ (previously supported?) |
| Supports Windows?                                          | ❌           | ❌                               | ❌              | ✅                               | ❌                         | ✅                                      | ❌                                    | ❌                                          | ❌           | ✅                         |
| Language                                                   | Bash          | Go                                | Python           | Rust                              | D                           | JavaScript (+ [[https://github.com/sindresorhus/macos-trash][Swift binary]] on Mac)       | Objective-C                            | Bash                                         | Bash          | Go                          |
| Architecture                                               | Single script | Single binary & Multi subcommands | Multi commands   | Single binary & Multi subcommands | Single binary               | Single command                           | Single binary                          | Single script                                | Single script | Single binary               |
| Has rm-like interface                                      | ✅           | ✅                               | ✅              | ❌                               | ✅                         | ✅ (ignores all flags)                  | ✅ (ignores all flags)                | ✅                                          | ✅           | ✅                         |
| Command to put FILE in trash                               | ~zap FILE~      | ~gtrash put FILE~                   | ~trash-put FILE~   | ~trashy FILE~ or ~trashy put FILE~    | ~trash FILE~                  | ~trash FILE~                               | ~trash FILE~                             | ~rm-trash FILE~                                | ~trash FILE~    | ~gomi FILE~                   |
| Command to list trash contents                             | ❌           | ~gtrash find~                       | ~trash-list~       | ~trashy list~                       | ~trash --list~                | ❌                                      | ~trash -l~                               | ❌                                          | ❌           | ❌                         |
| Command to restore FILE from trash                         | ❌           | ~gtrash find REGEX --restore~       | ~trash-restore~    | ~trashy restore REGEX~              | ~trash --restore FILE~ ️     | ❌                                      | ❌                                    | ❌                                          | ❌           | ~gomi --restore~              |
| Command to permanently delete/empty FILE from trash        | ❌           | ~gtrash find REGEX --rm~            | ~trash-rm FILE~    | ~trashy empty FILE~                 | ~trash --delete FILE~         | ❌                                      | ❌                                    | ❌                                          | ❌           | ❌                         |
| Command to fully empty trash                               | ❌           | ~gtrash find --rm~                  | ~trash-empty~      | ~trashy empty --all~                | ~trash --empty~               | [[https://github.com/sindresorhus/empty-trash-cli][available in separate project]]            | ~trash -e~ (or securely with ~trash -s~)   | ❌                                          | ❌           | ~gomi --prune=0m~             |
| Restore with TUI                                           | ❌           | ~gtrash restore~                    | ❌              | ❌                               | ❌                         | ❌                                      | ❌                                    | ❌                                          | ❌           | ~gomi --restore~              |
| Restore as a group                                         | ❌           | ✅                               | ❌              | ❌                               | ❌                         | ❌                                      | ❌                                    | ❌                                          | ❌           | ❌                         |
| Can show file and directory size                           | N/A           | ✅                               | ❌              | ❌                               | ❌                         | N/A                                      | ❌                                    | N/A                                          | N/A           | ❌                         |
| Can show summary of trash cans (total items, size)         | N/A           | ✅                               | ❌              | ❌                               | ❌                         | N/A                                      | ❌                                    | N/A                                          | N/A           | ❌                         |
| Support FreeDesktop.org directorysize cache                | ❌           | ✅                               | ❌              | ❌                               | ✅ (only put, cannot list) | ❌                                      | N/A                                    | ❌                                          | ❌           | ❌                         |
| Support FreeDesktop.org external filesystem trash can      | ✅           | ✅                               | ✅              | ✅                               | ❌                         | ✅                                      | N/A                                    | ❌                                          | ✅           | ✅                         |
| Support FreeDesktop.org fallback to home trash             | ✅           | ✅                               | ✅              | ❌                               | N/A                         |                                          | N/A                                    | N/A                                          |               |                             |
| Multiple strategies                                        | ✅ (many)    | ❌                               | ❌              | ❌                               | ❌                         | ❌                                      | ✅ (Finder/AppleScript or system API) | ❌                                          | ❌           | ✅ (XDG or "legacy")       |
| Size-based pruning                                         | ❌           | ✅                               | ❌              | ❌                               | ❌                         | ❌                                      | ❌                                    | ❌                                          | ❌           | ❌                         |
| Date-based pruning                                         | ❌           | ✅                               | ~trash-empty DAYS~ | ✅                               | ❌                         | ❌                                      | ❌                                    | ❌                                          | ❌           | ✅                         |
| Safe (show confirmation prompt before deleting by default) | N/A           | ✅                               | ❌              | ✅                               | ❌                         | ❌                                      | ✅                                    | N/A                                          | N/A           | ✅                         |
| Sort trashed items by deletion date by default?            | N/A           | ✅                               | ❌              | ✅                               | ❌                         | N/A                                      | ❌                                    | N/A                                          | N/A           | ✅ (when pruning)          |
